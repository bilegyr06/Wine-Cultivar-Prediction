<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wine Cultivar Prediction</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Wine Cultivar Classification</h1>
        <p class="subtitle" style="text-align: center; color: var(--text-light); margin-bottom: 40px;">
            A machine learning web app for predicting wine cultivar origin using chemical composition.
        </p>

        {% if errors %}
        <div class="card" style="background: #fee2e2; border: 1px solid #fecaca;">
            <h3 style="color: #dc2626;">Please fix the following errors:</h3>
            <ul style="color: #991b1b; margin: 10px 0;">
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- INPUT FORM -->
        <div class="card">
            <h3>üß™ Enter Wine Features</h3>
            <form method="POST" action="/predict">
                <div class="grid">
                    {% for feature in features %}
                    <div>
                        <label for="{{ feature }}">{{ feature.replace('_', ' ')|title }}</label>
                        <input type="number" step="any" name="{{ feature }}" id="{{ feature }}" placeholder="{{ feature.replace('_', ' ')|title }}" required>
                    </div>
                    {% endfor %}
                </div>
                <button type="submit">üîç Predict Cultivar</button>
            </form>
        </div>

        {% if result %}
        <div class="result card">  <!-- Uses both for shadow + special gradient -->
            <h3>‚úÖ Prediction Result</h3>
            <p><strong>Predicted Wine Cultivar:</strong> üçá {{ cultivar }}</p>
            <p style="color: var(--text-light); margin-top: 10px;">
                The SVM model classified this sample based on the 13 chemical features.
            </p>
        </div>
        {% endif %}

        <!-- EDA SECTION -->
        <div class="card eda-section">
            <h3>üìä Exploratory Data Analysis</h3>
            <p style="text-align: center; color: var(--text-light);">
                Visualizations from the UCI Wine dataset (178 samples, 3 classes)
            </p>
            <div class="eda-grid">
                <div>
                    <p>Alcohol vs Flavanoids (colored by class)</p>
                    <img src="{{ eda_scatter }}" alt="Alcohol vs Flavanoids Scatter Plot">
                </div>
                <div>
                    <p>Class Distribution</p>
                    <img src="{{ class_dist }}" alt="Class Distribution Bar Chart">
                </div>
            </div>
        </div>

        <footer>
            Built with FastAPI ‚Ä¢ Scikit-learn ‚Ä¢ Seaborn ‚Ä¢ Covenant University CSC415 Project üíú
        </footer>
    </div>
</body>
</html>